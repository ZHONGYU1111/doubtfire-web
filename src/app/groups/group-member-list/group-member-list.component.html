<div class="panel-body panel-loading" *ngIf="!loaded">
  <i class="fa fa-spinner fa-pulse"></i> Loading Members...
</div><!--/loading-->
<div class="panel-body" *ngIf="loaded && members.length == 0">
  <div class="callout callout-primary">
    <h4>No members in group</h4>
    <p>There are no members in this group</p>
  </div>
</div><!--no-members-->
<table *ngIf="loaded && members.length > 0" class="table table-condensed table-hover table-pointer">
  <thead>
    <tr>
      <th *ngIf="unitRole">
        <a (click)="sortTableBy('student.username')">
          Student ID
          <i *ngIf="tableSort.order == 'student.username'" class="fa fa-caret-{{tableSort.reverse ? 'up' : 'down'}}"></i>
        </a>
      </th>
      <th>
        <a (click)="sortTableBy('student.name')">
          Name
          <i *ngIf="tableSort.order == 'student.name'" class="fa fa-caret-{{tableSort.reverse ? 'up' : 'down'}}"></i>
        </a>
      </th>
      <th *ngIf="unitRole">
        <a (click)="sortTableBy('targetGrade')" title="Using target grade to sort">
          Target Grade
          <i *ngIf="tableSort.order == 'targetGrade'" class="fa fa-caret-{{tableSort.reverse ? 'up' : 'down'}}" title="Using target grade to sort"></i>
        </a>
      </th>
      <th *ngIf="canRemoveMembers">
        Actions
      </th>
    </tr>
  </thead>
  <tbody>
    <tr *ngFor="let member of members | orderBy: tableSort.order : tableSort.reverse">
      <td class="student-id" *ngIf="unitRole">{{ member.student.username || "N/A" }}</td>
      <td class="student-name">{{ member.student.name }}</td>
      <td *ngIf="unitRole" class="student-grade text-left">
        <grade-icon [grade]="member.targetGrade"></grade-icon>
      </td>
      <td class="actions" *ngIf="canRemoveMembers">
        <button (click)="removeMember(member)" class="btn btn-sm btn-danger" *ngIf="!project">
          <i class="fa fa-minus"></i>
          <span *ngIf="member.id !== project?.id">Remove</span>
        </button>
        <button (click)="removeMember(member)" class="btn btn-sm btn-danger" *ngIf="member.id === project?.id">
          <i class="fa fa-minus"></i>
          <span>Leave</span>
        </button>
      </td>
    </tr>
  </tbody>
</table>